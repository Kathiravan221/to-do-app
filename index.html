<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>to do application</title>
    <link rel="stylesheet" href="../../bslibrary/bootstrap-5.3.8-dist/bootstrap-5.3.8-dist/css/bootstrap.min.css">
    <style>
      h2{
        text-align: center;
        padding-top: 20px;
        color: rgb(255, 255, 255);
      }
      .maincontainer{
        display: flex;
        justify-content: center;
        padding-top:20px;
      }
      #addtasks
      {
        background-color: rgb(52, 95, 223);
        color: white;
        margin: none;
        border-radius: 5px;
        padding: 10px;
        margin: 10px;
      }
      .deletebtn{
        background-color: rgb(223, 52, 52);
        color: white;
        margin: none;
        border-radius: 5px;
        margin: 10px;
      }
      #input
      {
        height: 45px;
        width: 400px;
        margin-top:10px;
        padding-left: 20px;
        background-color: azure;
        border-radius: 5px;
        border: none;
      }
      body{
        background-color: rgb(73, 73, 73);
      }
      .container2
      {
        display: inline-block;
        justify-content: center;
        align-items: center;
        color: white;
        display: flex;
        padding:3px;
        width :570px;
        margin:auto;
        margin-top: 10px;
        justify-content:space-around;
        border-radius:10px;
        background-color: rgb(60, 60, 60);
      }
      .container2:hover
      {
         box-shadow: 0 4px 10px rgba(255, 255, 255, 0.2);
      }
      .container2 h4
      {
        display: inline;
        padding:2px;
      }
      .editbtn{
          margin-left: 250px;
          background-color: orange;
          border: none;
          padding:5px 10px;
          border-radius: 10px;
          box-shadow: 1px 2px rgb(107, 107, 107);
      }
       .deletedbtn{
          background-color:rgb(223, 52, 52);
          border: none;
          padding:5px 10px;
          border-radius: 10px;
          box-shadow: 1px 2px rgb(107, 107, 107);
      }


      

    
    </style>
</head>
<body >
    <div >
        <h2 >TO DO APPLICATION</h2>
        <div class="maincontainer">
        <input type="text" placeholder="ENTER YOUR TASKS" id="input"> 
        <button id="addtasks">ADD</button>
        <button  onclick="clearAll()" class="deletebtn">CLEAR ALL</button>
        </div> 
        <div id="container">
            </div>
         
        <script>
            let tasklist = JSON.parse(localStorage.getItem("tasks")) || [];
            let edtingid=null
          inputele=document.getElementById("input")
          addtasksele=document.getElementById("addtasks")
          let containerele=document.getElementById("container")

          addtasksele.addEventListener("click", ()=>{
            text=inputele.value
            if (text === "")
            {
                alert(" ⚠️PLEASE ENTER TASK")
                return
            }
            if(edtingid!==null)
          {
            tasklist.forEach(element=>{
                if(element.id==edtingid)
                element.content=text
              
            })
            edtingid=null
            addtasksele.innerText="add"
              inputele.value=""
              saveData()
                display()
          }
          else
          {
            let obiject={
                id:Math.trunc(Math.random()*100000),
                content:text,
            }
            tasklist.push(obiject)
            inputele.value=""
            saveData()
            display ()
        }
              })
              
            function display() {
    let str = "";
    tasklist.forEach(element => {
        str += `<div class="container2">
                       <h4>${element.content}</h4>
                        <button class="editbtn"  onclick="editcontent(${element.id})">EDIT</button>
                        <button class="deletedbtn"  onclick="deleteitem(${element.id})">DELETE</button>
                    </div>`;
    });
    containerele.innerHTML = str;
}


            function deleteitem(id)
            {
                tasklist=tasklist.filter(element=>(element.id!==id))
                saveData()
                display()
            }
            function editcontent(id){
                let elementtoedit=tasklist.find(element=>element.id==id)
                inputele.value=elementtoedit.content
                addtasksele.innerText="UPDATE"
                edtingid=id

            }
            function saveData() {
               localStorage.setItem("tasks", JSON.stringify(tasklist));
             }
            function clearAll() {
        localStorage.removeItem("tasks");
        tasklist = [];
        display();
    }


            display();
        </script>
 
</body>
</html>
